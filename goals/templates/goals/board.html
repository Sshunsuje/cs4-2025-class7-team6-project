{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç›®æ¨™å®£è¨€ãƒœãƒ¼ãƒ‰</title>
  <link rel="stylesheet" href="{% static 'goals/board.css' %}">
</head>
<body>
<header>
  <h1>ç›®æ¨™å®£è¨€ãƒœãƒ¼ãƒ‰</h1>
  <p>ä»Šæ—¥ã®ç›®æ¨™ã‚’è²¼ã‚Šä»˜ã‘ã¦ã€ã¿ã‚“ãªã§é ‘å¼µã‚ã†ã€‚</p>
</header>
<div class="container">
  <!-- è¿½åŠ ï¼†ãƒ•ã‚£ãƒ«ã‚¿ -->
  <div class="card">
    <!-- action="" ã«ã—ã¦ â€œä»Šè¦‹ã¦ã‚‹URLâ€ ã«å¿…ãšPOSTã•ã›ã‚‹ï¼ˆ/goals/ or /goals/?status=todo ãªã©ï¼‰ -->
    <form method="post" action="" class="add-form">
      {% csrf_token %}
      <input type="text" name="text" placeholder="ä¾‹ï¼šè‹±èªã‚’30åˆ†ã‚„ã‚‹" maxlength="200" required>
      <button class="btn" type="submit">è¿½åŠ </button>
      <a class="btn btn-secondary" href="{% url 'vs:index' %}">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
    </form>
    <div class="filters">
      <div class="filter-group">
        <a class="tab {% if status == 'todo' %}active{% endif %}" href="?status=todo">æœªå®Œäº†</a>
        <a class="tab {% if status == 'done' %}active{% endif %}" href="?status=done">å®Œäº†æ¸ˆã¿</a>
      </div>
    </div>
  </div>
  <!-- ä¸€è¦§ -->
  <div class="card">
    <h2 class="section-title">ç›®æ¨™ä¸€è¦§</h2>
    {% if goals %}
      <div class="goal-list">
        {% for g in goals %}
          <div class="goal-item {% if g.is_done %}done{% endif %}">
            <div class="goal-main">
              <div class="goal-text">{{ g.text }}</div>
              <div class="goal-meta">{{ g.created_at|date:"Y/m/d H:i" }}</div>
            </div>
            <div class="goal-actions">
              <form method="post" action="{% url 'goals:like' g.id %}">
                {% csrf_token %}
                <button class="pill" type="submit">ğŸ‘ {{ g.likes }}</button>
              </form>
              <form method="post" action="{% url 'goals:done' g.id %}">
                {% csrf_token %}
                <button class="pill {% if g.is_done %}pill-undo{% else %}pill-done{% endif %}" type="submit">
                  {% if g.is_done %}æˆ»ã™{% else %}å®Œäº†{% endif %}
                </button>
              </form>
              {% if g.is_done %}
              <form method="post"
                    action="{% url 'goals:delete' g.id %}"
                    onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                {% csrf_token %}
                <button class="pill pill-delete" type="submit">æ¶ˆå»</button>
              </form>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="empty">ã¾ã ç›®æ¨™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}
  </div>
</div>
</body>
</html>